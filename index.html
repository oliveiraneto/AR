<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Calculadora de Vencimento de Boleto</title>
    <script>
        //Função aonde será calculado a data e o horario.
        function calcularVencimento() {
            var dataVencimento = new Date(document.getElementById("data-vencimento").value);
            var dataAtual = new Date();
            var horaAtual = dataAtual.getHours();

            // Aqui é feito o cálculo do vencimento.
            var diferencaEmMilissegundos = dataVencimento - dataAtual;
            var diferencaEmDias = Math.ceil(diferencaEmMilissegundos / (1000 * 60 * 60 * 24)); 

            // Envia uma mensagem caso o boleto esteja perto ou já venceu.
            if (diferencaEmDias <= 0) {
                document.getElementById("mensagem").innerHTML = "O boleto não pode ser enviado, pois já esta vencido";
                document.querySelector(".arquivo").style.display = "none";
            } 
            // Verifica se está dentro do horário permitido para enviar o arquivo.
            else if (horaAtual < 8 || horaAtual >= 16) {
                document.getElementById("mensagem").innerHTML = "O boleto so pode ser enviado entre 08:00 e 16:00 horas.";
                document.querySelector(".arquivo").style.display = "none";
            }
            // Informa a quantidade de dias que falta para vencer e exibe o campo de enviar arquivo.
            else {
                document.getElementById("mensagem").innerHTML = "Faltam " + diferencaEmDias + " dias para o vencimento do boleto.";
                document.querySelector(".arquivo").style.display = "block";
            }
        }
    </script>
</head>
<body> 
    <h1>Calculadora de Vencimento de Boleto</h1>
    <div class="Calendario">
        <label for="data-vencimento">Selecione a data de vencimento do boleto:</label>
        <input type="date" id="data-vencimento"> 
        <br><br> 
    </div> 
    <button onclick="calcularVencimento()">Verificar Vencimento</button>
    <div id="mensagem"></div>

    <div class="arquivo" style="display: none;">
        <form action="/upload" method="post" enctype="multipart/form-data">
            <label for="arquivo">Selecione um arquivo:</label>
            <input type="file" id="arquivo" name="arquivo">
            <br><br>
            <input type="submit" value="Enviar">
        </form>
    </div>
</body>
</html>
